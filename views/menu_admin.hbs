<html>

<head>
    
     <title>CoCo Helper App</title>

    
     <link rel="stylesheet" href="css/menu_adminstyle.css">
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    
     
</head>

<body>
    
   
    <div id = "nav-holder">
    {{>topnavbar}}
    </div>

     <div class ="edit-popup" id="edit-drink-div">
        <h1>Edit</h1>
        <button id="delbutton" type="button">Delete</button>

        <label for="newdrinkimg">Select an image for the drink:</label>

        <input type="file" id="newdrinkimg" name="newdrinkimg">
        <form action = "http://www.google.com">
            <label for="newregprice">Regular Price:<br></label>
            <input type="text" id = "newregprice" placeholder="Enter Regular Price" name="newregprice" required>

        

            <label for="newlprice"><br>Large Price:<br></label>
            <input type="text" id = "newlprice" placeholder="Enter Large Price" name="newlprice" required>
        </form>

        <button class ="savebutton" id = "savebutton_edit" type="button">Save</button>

    </div>
    <div class="edit-popup" id="add-drink-div" >
        
        <h1>Add Drink to Menu</h1>
        

      
        <label for="drinkimg">Select an image for the drink:</label>
        <input  form ="add-drink" type="file" id="drinkimg" name="drinkimg">
       
        <form action="upload-drinkimg" method = "post" enctype="multipart/form-data" id="add-drink">
            <input type ="text" id ="category" name = "category" style = "position:absolute;visibility:hidden;">
            
            <label for="regprice">Regular Price:</label>
            <input type="number" id = "regprice" placeholder="Enter Regular Price" name="regprice" required>

        

            <label for="lprice"><br>Large Price:</label>
            <input type="number" id = "lprice" placeholder="Enter Large Price" name="lprice" required>

            <label for="drinkname"><br>Name:</label>
            <input type="text" id="drinkname" placeholder="Enter Drink Name" name="drinkname" required>
            
        </form>

        <button class ="savebutton" id = "savebutton_add" type="submit" form ="add-drink">Add Drink</button>

       
        

    </div>
    

    <div id="favorites-page" class = "category">
        <div class = "product">
            <img src="images/pandamilktea.png" class = "product-photo">
            <p>Panda Milk Tea</p>
            <img src="images/favorite-icon.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>
        <div class = "product">
            <img src="images/whitepearlmt.png" class = "product-photo">
            <p>White Pearl Milk Tea</p>
            <img src="images/favorite-icon.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>
        <div class = "product">
            <img src="images/lemondunk.png" class = "product-photo">
            <p>Lemon Dunk</p>
            <img src="images/favorite-icon.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

    </div>


    <div id="menu-proper">
        <h1>MENU</h1>
        <p id ="milk-tea-text" class = "category-choice">Milk Tea</p>
        <p id ="fruit-tea-text" class = "category-choice">Fruit Tea</p>
        <p id ="coffee-text" class = "category-choice">Coffee</p>
        <p id ="slush-text" class = "category-choice">Slush</p>
        <p id ="choco-text" class = "category-choice">Chocolate</p>
        <p id ="freshtea-text" class = "category-choice">Fresh Tea</p>
        <p id ="juice-text" class = "category-choice">Juice</p>

        
    </div>

    <button type="button" id="add-button">Add A Drink</button>

    <div id ="milk-tea-menu" class = "category">
        {{#each admin_drinks}}
            {{> drink_admin drinkname=drinkname drinkimg=drinkimg}}

        {{/each}}
       

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/milktea.png" class = "product-photo">
            <p>CoCo Milk Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/perlmilktea.png" class = "product-photo">
            <p>Pearl Milk Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/pandamilktea.png" class = "product-photo">
            <p>Panda Milk Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/grassjellymt.png" class = "product-photo">
            <p>Grass Jelly Milk Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/whitepearlmt.png" class = "product-photo">
            <p>White Pearl Milk Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/2ladiesmt.png" class = "product-photo">
            <p>2 Ladies Milk Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>



    </div>

    <div id="fruit-tea-menu" class = "category">

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/lemondunk.png" class = "product-photo">
            <p>Lemon Dunk</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>

        <div class = "product">
            <img src="images/edit.png" class ="edit-icon">
            <img src="images/lemonblacktea.png" class = "product-photo">
            <p>Lemon Black Tea</p>
            <img src="images/icons8-heart-50.png" class = "heart">
            <img src = "images/shopping-cart.png" class = "cart-icon">
        </div>
        

    </div>


    <div id="coffee-menu" class = "category">

       
        

    </div>

    <div id="slush-menu" class = "category">

       
        

    </div>

    <div id="choco-menu" class = "category">

       
        

    </div>

    <div id="freshtea-menu" class = "category">

       
        

    </div>

    <div id="juice-menu" class = "category">

       
        

    </div>


    

    <script>

         function findCategory() {
            var category = "default";
            
            /*Current menu admin is on will always have the menu display on BLOCK */
            if ($("#milk-tea-menu").css("display") == "block") {
                category = "milktea";
            } else if($("#fruit-tea-menu").css("display") == "block") {
                 category = "fruittea";
            } else if($("#coffee-menu").css("display") == "block") {
                 category = "coffee";
            }else if($("#slush-menu").css("display") == "block") {
                 category = "slush";
            } else if($("#choco-menu").css("display") == "block") {
                 category = "choco";
            } else if($("#freshtea-menu").css("display") == "block") {
                 category = "freshtea";
            } else {
                 category = "juicetea";
            } 
            

           
        return category;

            

        }

       

    $(document).ready(function() {

        var drinkname_edit;

          $('.product').on('click', '.edit-icon', function () {

             /*Dim the background  */
            var dimbg = document.createElement('div');
            var navholder = document.querySelector("#nav-holder");
            

            dimbg.setAttribute('class', 'dim-bg');
            
            navholder.insertAdjacentElement('beforebegin',dimbg);

            /*Show edit drink form */
            $("#edit-drink-div").css('display','block');


            //get drinkname (each drinkname HAS to be unique, add it to form validation later)
            var nextsib = this.nextElementSibling;

            //drinkname global var
            drinkname_edit = nextsib.nextElementSibling.innerHTML;

            


            





         });

         $('#delbutton').click(function (e) {

                $.get("/delete-drink", {drinkname: drinkname_edit}, function(result) {



                });

                 /*Dim the background  */
                $("#edit-drink-div").css('display','none');
                var dimbg = document.getElementsByClassName("dim-bg");

                dimbg[0].remove();



            });

         


        

        /*When add button is clicked, dim background for popup and show add drink form */
         $("#add-button").click(function (e) { 

            /*Dim the background  */
            var dimbg = document.createElement('div');
            var navholder = document.querySelector("#nav-holder");
            

            dimbg.setAttribute('class', 'dim-bg');
            
            navholder.insertAdjacentElement('beforebegin',dimbg);

            /*Show add drink form */
            $("#add-drink-div").css('display','block');
            
            

            
        });
        

        $("#savebutton_add").click(function (e) { 

           

            /*var category = findCategory(); */
            var lprice = document.getElementById("lprice").value;
            var regprice = document.getElementById("regprice").value;
            var drinkname = document.getElementById("drinkname").value;
            var category = findCategory();
            var drinkimg = document.getElementById("drinkimg").value;
            
            $.post('/add-drink', {category: category,lprice:lprice, regprice:regprice, drinkname:drinkname, drinkimg: drinkimg}, function (result) {

                
        });

            
            

            
             /*Dim the background  */
        /*$("#add-drink-div").css('display','none');
        var dimbg = document.getElementsByClassName("dim-bg");

        dimbg[0].remove();
        */

            
        });



        function switchMenuCategory(drinkid, drinktextid) {

            $(".category").hide();
            $(drinkid).fadeIn();
            $(".category-choice").css("color", "#3E3B3B");
            $(drinktextid).css("color", "#F07F19");

        }

        function switchNavPage(page) {
            $(".category").hide();
            $("#menu-proper").hide();
            $(page).fadeIn();
        }

        $("#fruit-tea-text").click(function (e) { 
           

            switchMenuCategory("#fruit-tea-menu", "#fruit-tea-text");
            
            
            
        });

        $("#milk-tea-text").click(function (e) { 
            //$(".category[display=block]").css("display", "none");
            switchMenuCategory("#milk-tea-menu", "#milk-tea-text");
            
        });

         

         $("#coffee-text").click(function (e) { 
            //$(".category[display=block]").css("display", "none");
            switchMenuCategory("#coffee-menu", "#coffee-text");
            
        });

         $("#slush-text").click(function (e) { 
            //$(".category[display=block]").css("display", "none");
            switchMenuCategory("#slush-menu", "#slush-text");
            
        });

         $("#choco-text").click(function (e) { 
            //$(".category[display=block]").css("display", "none");
            switchMenuCategory("#choco-menu", "#choco-text");
            
        });

         $("#juice-text").click(function (e) { 
            //$(".category[display=block]").css("display", "none");
            switchMenuCategory("#juice-menu", "#juice-text");
            
        });

        


        $("#favorites-tab").click(function (e){
            switchNavPage("#favorites-page", "#favorites-header");
        });

        $("#menu-tab").click(function (e){
            window.location.reload();
        });

        

        
       
 


    });
    </script>
    
  

    
    

</body>

</html>